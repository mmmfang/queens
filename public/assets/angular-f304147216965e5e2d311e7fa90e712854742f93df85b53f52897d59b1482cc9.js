var app=angular.module("moodApp",["ngRoute"]);app.controller("HeaderController",["$http",function(o){var e=this;o.get("/session").success(function(o){e.current_user=o.current_user})}]),app.controller("MoodController",["$http",function(o){var e=document.querySelector('meta[name="csrf-token"]').getAttribute("content"),t=this;this.happiness=void 0,this.getMood=function(){o.get("/moods").success(function(o){t.current_user_moods=o.moods})},t.getMood(),this.createMood=function(){t.current_user_moods.push({happiness:this.happiness}),o.post("/moods",{authenticity_token:e,mood:{happiness:this.happiness}}).success(function(r){var s=r.mood;o.post("/moods/"+s.id+"/factors",{authenticity_token:e,factor:{blurb:t.factorsBlurb}}).success(function(o){s.factors.push(o.factor),t.happiness=void 0,t.factorsBlurb=void 0}),t.current_user_moods.pop(),t.current_user_moods.push(s),t.getMood()})},this.deleteMood=function(r){var s=t.current_user_moods.indexOf(r);t.current_user_moods.splice(s,1),console.log(r.id),o["delete"]("/moods/"+r.id,{authenticity_token:e}).success(function(o){console.log("SUCCESS")}).error(function(o,e){console.log("ERROR")}),t.getMood()}}]),app.config(["$routeProvider","$locationProvider",function(o,e){e.html5Mode({enabled:!0}),o.when("/moods",{templateUrl:"/angular_templates/moods.html.erb",controller:"MoodController",controllerAs:"mood"}).when("/form",{templateUrl:"/angular_templates/form.html.erb",controller:"MoodController",controllerAs:"mood"}).when("/moods/:id",{controller:"MoodController",controllerAs:"mood",templateUrl:"/angular_templates/moods.html.erb"}).when("/users/:id",{templateUrl:"/angular_templates/user.html",controller:"HeaderController",controllerAs:"header"}).otherwise({redirectTo:"/"})}]);